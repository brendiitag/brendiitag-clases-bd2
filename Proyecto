CREATE TABLE PELICULA(ID_PELICULA INTEGER, TITULO VARCHAR2(120), DIRECTOR VARCHAR2(120), SINOPSIS VARCHAR2(255),CONSTRAINT PK_ID_PELICULA PRIMARY KEY(ID_PELICULA)); 


CREATE TABLE HORARIO(ID_HORARIO INTEGER, ID_PELICULA INTEGER,FECHA DATE, CONSTRAINT PK_ID_HORARIO PRIMARY KEY(ID_HORARIO), CONSTRAINT FK1_ID_PELICULA FOREIGN  KEY(ID_PELICULA) REFERENCES PELICULA (ID_PELICULA));

CREATE TABLE SALA(ID_SALA INTEGER, ID_PELICULA INTEGER, ID_HORARIO INTEGER, NUM_ASIENTO INTEGER, CONSTRAINT PK_ID_SALA PRIMARY KEY (ID_SALA),CONSTRAINT FK1_ID_PELICULA FOREIGN KEY(ID_PELICULA) REFERENCES PELICULA (ID_PELICULA), CONSTRAINT FK2_ID_HORARIO FOREIGN KEY(ID_HORARIO) REFERENCES HORARIO(ID_HORARIO));

CREATE TABLE REPARTO(ID_REPARTO INTEGER,ID_PELICULA INTEGER,ID_HORARIO INTEGER, ACTORES VARCHAR2(120),ACTRICES VARCHAR2(120), CONSTRAINT PK_ID_REPARTO PRIMARY KEY(ID_REPARTO),CONSTRAINT FK_ID_PELICULA FOREIGN KEY(ID_PELICULA) REFERENCES PELICULA (ID_PELICULA),CONSTRAINT FK2_ID_HORARIO FOREIGN KEY(ID_HORARIO) REFERENCES HORARIO(ID_HORARIO));

/* GENERAMOS LA SECUENCIA CORRESPONDIENTE A LA TABLA PELICULA*/

CREATE SEQUENCE SECUENCIA_PELICULA
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

/*Creamos el procedimiento de la tabla pelicula*/
CREATE OR  REPLACE PROCEDURE GUARDAR_PELICULA(MY_ID_PELICULA OUT INTEGER,MY_TITULO IN VARCHAR2,MY_DIRECTOR IN VARCHAR2,MY_SINOPSIS IN VARCHAR2)
AS
BEGIN
SELECT SECUENCIA_PELICULA.NEXTVAL INTO  MY_ID_PELICULA FROM DUAL;
INSERT INTO PELICULA VALUES (MY_ID_PELICULA,MY_TITULO,MY_DIRECTOR,MY_SINOPSIS);
END;
/

/* GENERAMOS LA SECUENCIA CORRESPONDIENTE A LA TABLA HORARIO*/

CREATE SEQUENCE SECUENCIA_HORARIO
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

/*Creamos el procedimiento de la tabla HORARIO*/
CREATE OR  REPLACE PROCEDURE GUARDAR_HORARIO(MY_ID_HORARIO OUT INTEGER,MY_FECHA IN DATE)
AS
BEGIN
SELECT SECUENCIA_HORARIO.NEXTVAL INTO  MY_ID_HORARIO FROM DUAL;
INSERT INTO HORARIO VALUES (MY_ID_HORARIO,MY_FECHA);
END;
/

/* GENERAMOS LA SECUENCIA CORRESPONDIENTE A LA TABLA SALA*/

CREATE SEQUENCE SECUENCIA_SALA
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

/*Creamos el procedimiento de la tabla SALA*/
CREATE OR  REPLACE PROCEDURE GUARDAR_SALA(MY_ID_SALA OUT INTEGER,MY_NUM_ASIENTO IN INTEGER)
AS
BEGIN
SELECT SECUENCIA_SALA.NEXTVAL INTO  MY_ID_SALA FROM DUAL;
INSERT INTO SALA VALUES (MY_ID_SALA,MY_NUM_ASIENTO);
END;
/

/* GENERAMOS LA SECUENCIA CORRESPONDIENTE A LA TABLA REPARTO*/

CREATE SEQUENCE SECUENCIA_REPARTO
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

/*Creamos el procedimiento de la tabla REPARTO*/
CREATE OR  REPLACE PROCEDURE GUARDAR_REPARTO(MY_ID_REPARTO OUT INTEGER,MY_ACTORES IN VARCHAR2,MY_ACTRICES IN VARCHAR2)
AS
BEGIN
SELECT SECUENCIA_REPARTO.NEXTVAL INTO  MY_ID_REPARTO FROM DUAL;
INSERT INTO REPARTO VALUES (MY_ID_REPARTO,MY_ACTORES,MY_ACTRICES);
END;
/

/* MI PRIMER STORED PROCEDURE*/

CREATE OR REPLACE PROCEDURE hola_mundo 
AS  
MENSAJITO VARCHAR2(250);
BEGIN
MENSAJITO:='MIS PRIMEROS PININOS CON LOS PROCEDIMIENTOS';
DBMS_OUTPUT.PUT_LINE(MENSAJITO);
END;
/



BEGIN 
 HOLA_MUNDO();
END;
